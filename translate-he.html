<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>מילון הפשוט</title>
    <link href="favicon.ico" rel="shortcut icon" type="image/vnd.microsoft.icon" />
    <link rel="apple-touch-icon" href="apple-touch-icon.png" />
    <link rel="stylesheet" type="text/css" href="main.css">
    <script src="jquery.min.js"></script>
    <script>
      var postWord = function() {
        $.ajax({
          url: "dict-he-en.json",
          dataType: "text",
          success: function(data) {
            var json = $.parseJSON(data);
            var words = json.words;
            var findWord = function(wordName) {
              for (i in words) {
                var word = words[i];

                //~ var dictWord = word.translated[0].replace(/[\u0591-\u05C7]/g,'');
                //~ if (dictWord === wordName) {

                var wordFound = false;
                for (i in word.translated) {
                  var dictWord = word.translated[i].replace(/[\u0591-\u05C7]/g,'');
                  if (dictWord === wordName) {
                    wordFound = true;
                  }
                }

                if (wordFound === true) {
                  
                  var newWord = document.createElement('div');
                  newWord.className = 'word';
                  newWord.id = word.id;
                  
                  var wordTranslated = document.createElement('h2');
                  wordTranslated.innerHTML = word.translated;
                  wordTranslated.className = 'translated he';
                  
                  var wordPart = document.createElement('h3');
                  wordPart.innerHTML = word.part_of_speech;
                  wordPart.className = 'part he';
                  
                  var wordTranslation = document.createElement('p');
                  wordTranslation.innerHTML = word.translation;
                  wordTranslation.className = 'translation';
                  
                  newWord.appendChild(wordTranslated);
                  newWord.appendChild(wordPart);
                  newWord.appendChild(wordTranslation);
                  var wordsDiv = document.getElementById('words')
                  wordsDiv.insertBefore(newWord, wordsDiv.firstChild);
                }
              }
            }
            findWord(document.getElementById('word-to-translate').value);
          }
        })
      }
    </script>
  </head>
  <body>
    <header>
      <nav>
        <a href="translate-he.html">translate he</a>
        <a href="translate-en.html">translate en</a>
        <a href="show-all-he.html">all he</a>
        <a href="show-all-en.html">all en</a>
      </nav>
      <img class="logo" src="logo.svg" alt="Milon Hapashut" />
    </header>
    <section>
      <form action="#" class="he" onsubmit="postWord()">
        <input type="search" id="word-to-translate" placeholder="" />
        <input type="submit" id="word-search" value="חפש">
      </form>
      <div class="words" id="words"></div>
    </section>
    <footer><a href="https://github.com/chschtsch/milon">fork me on GitHub</a></footer>
  </body>
</html>
